# Taro + Rocket 单仓库集成方案 - 需求对齐文档

## 项目上下文分析

### 现有项目结构
- **后端框架**: Rocket 0.5 (Rust)
- **项目根目录**: `f:\rust-project\Rocket`
- **现有文档**: 已具备完整的Rocket功能说明书
- **构建系统**: Cargo
- **目录结构**: 标准的Rust项目布局

### 需求理解确认

#### 原始需求
1. 在现有Rocket项目中集成前端框架
2. 支持Web、H5、微信小程序三端统一开发
3. 不采用前后端分离部署，要求单仓库完整打包
4. 使用Taro 3.x + React技术栈

#### 需求边界
- **包含内容**:
  - Taro前端项目集成
  - 三端构建配置(Web/H5/小程序)
  - Rocket静态文件服务配置
  - 单仓库构建流程
  - 开发环境配置

- **不包含内容**:
  - 独立的前端部署服务器
  - 跨域CORS配置(同域部署)
  - 小程序云开发(仅前端构建)

#### 技术约束
- **构建工具**: 必须使用Taro官方构建工具
- **部署方式**: 单文件部署，Rocket提供静态文件服务
- **开发模式**: 支持热重载和快速开发
- **性能要求**: 生产环境优化，支持缓存和压缩

### 疑问澄清

#### 已确认的关键决策
1. ✅ 前端框架: Taro 3.x + React
2. ✅ 部署模式: 单仓库打包，非分离部署
3. ✅ 目标平台: Web + H5 + 微信小程序
4. ✅ 后端框架: 保持Rocket不变

#### 待确认细节
1. **小程序AppID**: 是否需要配置特定的小程序AppID?
2. **UI组件库**: 是否有偏好的Taro UI组件库?
3. **状态管理**: 是否使用Redux Toolkit或Zustand?
4. **样式方案**: CSS Modules、Styled-components还是Tailwind CSS?
5. **API前缀**: 是否需要特定的API路由前缀(如/api/)?

## 技术方案概述

### 架构模式
```
Rocket项目(根目录)
├── src/                    # Rust后端源码
├── frontend/               # Taro前端项目
│   ├── src/               # React组件源码
│   ├── config/            # Taro构建配置
│   └── dist/              # 构建输出
├── static/                # 前端构建产物
│   ├── web/               # Web端构建结果
│   ├── h5/                # H5端构建结果
│   └── weapp/             # 小程序构建结果
├── build.rs               # 构建脚本
└── Rocket.toml            # Rocket配置
```

### 核心集成策略
1. **构建集成**: 通过`build.rs`在编译时自动构建前端
2. **静态服务**: Rocket配置静态文件服务，指向构建产物
3. **路由策略**: SPA路由回退到index.html
4. **开发体验**: 支持并行开发，热重载

### 质量保证
- 所有配置均可独立测试
- 提供完整的开发文档
- 支持生产环境优化
- 零配置启动开发环境