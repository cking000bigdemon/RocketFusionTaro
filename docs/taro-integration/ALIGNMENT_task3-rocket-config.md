# 任务3: Rocket配置更新 - 需求对齐文档

## 原始需求
"继续执行任务3" - 基于已完成的Taro项目初始化，需要更新Rocket配置以支持前端集成。

## 项目上下文分析

### 当前项目状态
- **前端**: Taro项目已初始化完成，位于 `frontend/` 目录
- **后端**: Rocket框架项目，标准结构
- **技术栈**: Rust + Rocket + React/Taro
- **目标**: 实现前后端集成，支持三端构建

### 现有架构分析
- **Rocket版本**: 从Cargo.toml分析，使用最新稳定版本
- **路由结构**: 标准Rocket路由配置
- **静态文件**: 目前使用 `examples/static-files/` 模式
- **API设计**: RESTful风格，需要支持前端API调用

## 需求理解与边界确认

### 任务3核心需求
1. **路由配置更新**: 支持前端路由和API路由共存
2. **CORS配置**: 支持跨域请求（开发环境）
3. **静态文件服务**: 服务Taro构建产物
4. **API集成**: 前后端接口对接

### 边界限制
- **不修改**: 不更改现有Rocket核心业务逻辑
- **保持**: 保持现有项目结构和构建流程
- **兼容性**: 确保与现有examples兼容

### 疑问澄清

#### Q1: Rocket主服务位置
需要确认Rocket主服务的入口点位置，用于集成静态文件服务。

#### Q2: 开发/生产环境区分
需要明确如何区分开发环境（dev server）和生产环境（静态文件）。

#### Q3: API路由前缀
需要确认API路由的统一前缀（如 `/api/`）。

## 技术方案初步分析

### 集成策略
1. **静态文件服务**: 使用Rocket的 `StaticFiles` 或自定义路由
2. **CORS配置**: 使用 `rocket_cors` crate 或自定义Fairing
3. **路由组织**: SPA路由 + API路由分离
4. **构建集成**: 前端构建产物自动部署到Rocket静态目录

### 技术约束
- **Rust版本**: 与现有项目保持一致
- **依赖管理**: 使用现有Cargo.toml结构
- **构建流程**: 集成到现有构建脚本

## 待确认的关键决策点

1. **服务入口**: Rocket主服务文件位置？
2. **静态目录**: Taro构建产物存放目录？
3. **API前缀**: 是否使用 `/api/` 作为API路由前缀？
4. **CORS策略**: 开发环境全开放，生产环境限制？

基于现有项目结构分析，建议采用以下方案：
- 主服务入口: 创建 `src/main.rs` 或修改现有入口
- 静态目录: `frontend/dist/` 作为静态文件目录
- API前缀: `/api/` 统一前缀
- CORS策略: 开发环境允许所有来源