<!--login.wxml-->
<view class="login-container">
  <!-- 顶部Logo区域 -->
  <view class="logo-section">
    <view class="logo-icon">🚀</view>
    <view class="app-name">Rocket</view>
    <view class="welcome-text">欢迎使用</view>
    <view class="subtitle">请登录您的账户</view>
  </view>

  <!-- 登录表单 -->
  <view class="login-form">
    <view class="form-group">
      <view class="input-wrapper">
        <input 
          class="form-input" 
          placeholder="请输入用户名"
          value="{{form.username}}"
          bindinput="onUsernameInput"
          placeholder-class="input-placeholder"
        />
      </view>
    </view>

    <view class="form-group">
      <view class="input-wrapper">
        <input 
          class="form-input" 
          placeholder="请输入密码"
          password="{{true}}"
          value="{{form.password}}"
          bindinput="onPasswordInput"
          placeholder-class="input-placeholder"
        />
      </view>
    </view>

    <view class="form-options">
      <view class="remember-section">
        <checkbox-group bindchange="onRememberChange">
          <label class="remember-label">
            <checkbox value="remember" checked="{{form.rememberMe}}" />
            <text class="remember-text">记住密码</text>
          </label>
        </checkbox-group>
      </view>
    </view>

    <!-- 登录按钮 -->
    <button 
      class="login-btn {{isLoading ? 'btn-disabled' : ''}}" 
      bindtap="handleLogin"
      disabled="{{isLoading}}"
    >
      <text wx:if="{{!isLoading}}">登录</text>
      <text wx:else>登录中...</text>
    </button>

    <!-- 快速登录区域 -->
    <view class="quick-login-section">
      <view class="divider-section">
        <view class="divider-line"></view>
        <text class="divider-text">或</text>
        <view class="divider-line"></view>
      </view>

      <view class="quick-buttons">
        <button 
          class="quick-btn admin-btn" 
          bindtap="quickLogin" 
          data-type="admin"
          disabled="{{isLoading}}"
        >
          管理员登录
        </button>
        <button 
          class="quick-btn test-btn" 
          bindtap="quickLogin" 
          data-type="test"
          disabled="{{isLoading}}"
        >
          测试账号登录
        </button>
      </view>
    </view>

    <!-- 微信授权登录 -->
    <view class="wx-login-section" wx:if="{{showWxLogin}}">
      <button 
        class="wx-login-btn" 
        open-type="getUserInfo"
        bindgetuserinfo="handleWxLogin"
        disabled="{{isLoading}}"
      >
        <text>微信快速登录</text>
      </button>
    </view>

    <!-- 注册链接 -->
    <view class="register-link">
      <text class="register-text" bindtap="goToRegister">没有账号？注册新账号</text>
    </view>
  </view>

  <!-- 底部信息 -->
  <view class="footer-info">
    <text class="version-text">版本 {{appVersion}}</text>
    <text class="platform-text">微信小程序 · {{platformInfo}}</text>
  </view>
</view>

<!-- 加载遮罩 -->
<view class="loading-overlay" wx:if="{{isLoading}}">
  <view class="loading-content">
    <view class="loading-spinner"></view>
    <text class="loading-text">正在登录...</text>
  </view>
</view>