<!--login.wxml-->
<scroll-view class="login-scroll-container" scroll-y="{{true}}" enable-passive="{{true}}">
<view class="login-container">
  <!-- 顶部Logo区域 -->
  <view class="logo-section">
    <view class="logo-icon">🤖</view>
    <view class="app-name">AI AGENT NOW!</view>
    <view class="welcome-text">AI时代不掉队</view>
    <view class="subtitle">从现在开始！</view>
  </view>

  <!-- 登录表单 -->
  <view class="login-form">
    <view class="form-group">
      <view class="input-wrapper">
        <input 
          class="form-input" 
          placeholder="请输入用户名"
          value="{{form.username}}"
          bindinput="onUsernameInput"
          placeholder-class="input-placeholder"
        />
      </view>
    </view>

    <view class="form-group">
      <view class="input-wrapper">
        <input 
          class="form-input" 
          placeholder="请输入密码"
          password="{{true}}"
          value="{{form.password}}"
          bindinput="onPasswordInput"
          placeholder-class="input-placeholder"
        />
      </view>
    </view>

    <view class="form-options">
      <view class="remember-section">
        <checkbox-group bindchange="onRememberChange">
          <label class="remember-label">
            <checkbox value="remember" checked="{{form.rememberMe}}" />
            <text class="remember-text">记住密码</text>
          </label>
        </checkbox-group>
      </view>
    </view>

    <!-- 登录按钮 -->
    <button 
      class="login-btn {{isLoading ? 'btn-disabled' : ''}}" 
      bindtap="handleLogin"
      disabled="{{isLoading}}"
    >
      <text wx:if="{{!isLoading}}">登录</text>
      <text wx:else>登录中...</text>
    </button>

    <!-- 快速登录区域 -->
    <view class="quick-login-section">
      <!-- 游客登录按钮 -->
      <button 
        class="guest-login-btn" 
        bindtap="handleGuestLogin"
        disabled="{{isLoading}}"
      >
        <text wx:if="{{!isLoading}}">游客登录</text>
        <text wx:else>登录中...</text>
      </button>
      
      <!-- 微信授权登录 -->
      <view class="wx-login-wrapper" wx:if="{{showWxLogin}}">
        <button 
          class="wx-login-btn" 
          open-type="getUserInfo"
          bindgetuserinfo="handleWxLogin"
          disabled="{{isLoading}}"
        >
          <text>微信登录</text>
        </button>
      </view>
    </view>

    <!-- 游客登录说明 -->
    <view class="guest-login-tips">
      <text class="tips-text">游客登录可快速体验，部分功能受限</text>
    </view>

    <!-- 注册链接 -->
    <view class="register-link">
      <text class="register-text" bindtap="goToRegister">没有账号？注册新账号</text>
    </view>
  </view>

  <!-- 底部信息 -->
  <view class="footer-info">
    <text class="version-text">版本 {{appVersion}}</text>
    <text class="platform-text">微信小程序 · {{platformInfo}}</text>
  </view>
</view>
</scroll-view>

<!-- 加载遮罩 -->
<view class="loading-overlay" wx:if="{{isLoading}}">
  <view class="loading-content">
    <view class="loading-spinner"></view>
    <text class="loading-text">正在登录...</text>
  </view>
</view>