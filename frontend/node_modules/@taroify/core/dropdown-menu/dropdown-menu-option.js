import { Success } from "@taroify/icons/index.js";
import classnames from "classnames";
import * as React from "react";
import { useCallback, useContext } from "react";
import Cell from "../cell/index.js";
import { prefixClassname } from "../styles/index.js";
import DropdownMenuItemContext from "./dropdown-menu-item.context.js";
function DropdownMenuOption(props) {
    const { className, value, disabled, clickable = true, icon, children, onClick, ...restProps } = props;
    const { isOptionToggle, toggleOption } = useContext(DropdownMenuItemContext);
    const active = isOptionToggle?.(value);
    const handleClick = useCallback((event) => {
        onClick?.(event);
        if (!disabled) {
            toggleOption?.({
                active: !active,
                value,
                children,
            });
        }
    }, [active, children, disabled, onClick, toggleOption, value]);
    return (React.createElement(Cell, { className: classnames(prefixClassname("dropdown-menu-option"), {
            [prefixClassname("dropdown-menu-option--active")]: active,
            [prefixClassname("dropdown-menu-option--disabled")]: disabled,
        }, className), clickable: clickable, icon: icon, title: children, onClick: handleClick, ...restProps }, active && React.createElement(Success, { className: prefixClassname("dropdown-menu-option__icon") })));
}
export default DropdownMenuOption;
