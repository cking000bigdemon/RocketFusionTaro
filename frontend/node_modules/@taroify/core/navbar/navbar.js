import { View } from "@tarojs/components";
import classNames from "classnames";
import * as React from "react";
import { Children, isValidElement, useMemo } from "react";
import FixedView from "../fixed-view/index.js";
import { prefixClassname } from "../styles/index.js";
import { HAIRLINE_BORDER_BOTTOM } from "../styles/hairline.js";
import NavBarLeft from "./navbar-left.js";
import NavBarRight from "./navbar-right.js";
import NavBarTitle from "./navbar-title.js";
function useNavbarChildren(children) {
    return useMemo(() => {
        const __children__ = {
            left: undefined,
            right: undefined,
            title: undefined,
        };
        Children.forEach(children, (child) => {
            if (isValidElement(child)) {
                const element = child;
                const { type } = element;
                if (type === NavBarLeft) {
                    __children__.left = element;
                }
                else if (type === NavBarRight) {
                    __children__.right = element;
                }
                else if (type === NavBarTitle) {
                    __children__.title = element;
                }
            }
        });
        return __children__;
    }, [children]);
}
function Navbar(props) {
    const { className, bordered, fixed, placeholder, safeArea, nativeSafeTop, title: titleProp, children: childrenProp, ...restProps } = props;
    const { left, title, right } = useNavbarChildren(childrenProp);
    return (React.createElement(FixedView, { position: fixed && "top", safeArea: safeArea, nativeSafeTop: nativeSafeTop, placeholder: fixed && placeholder && prefixClassname("navbar__placeholder") },
        React.createElement(View, { className: classNames(prefixClassname("navbar"), {
                [HAIRLINE_BORDER_BOTTOM]: bordered,
            }, className), ...restProps },
            React.createElement(View, { className: classNames(prefixClassname("navbar__content")) },
                left,
                title ?? (React.createElement(View, { className: classNames(prefixClassname("navbar__title")), children: titleProp })),
                right))));
}
export default Navbar;
