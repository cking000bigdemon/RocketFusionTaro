import { Success } from "@taroify/icons/index.js";
import { View } from "@tarojs/components";
import classNames from "classnames";
import * as React from "react";
import { useContext } from "react";
import { prefixClassname } from "../styles/index.js";
import { addUnitPx } from "../utils/format/unit.js";
import RadioGroupContext from "./radio-group.context.js";
export default function Radio(props) {
    const { className, name, disabled: disabledProp, shape = "round", icon = React.createElement(Success, null), size: sizeProp, children, onClick, ...restProps } = props;
    const { value, direction, disabled: disabledGroup, size: sizeGroup, onChange, } = useContext(RadioGroupContext);
    const size = sizeProp ?? sizeGroup;
    const disabled = disabledProp ?? disabledGroup;
    const checked = name === value;
    function handleClick(event) {
        onClick?.(event);
        if (!disabled && name !== value) {
            onChange?.(name);
        }
    }
    return (React.createElement(View, { className: classNames(prefixClassname("radio"), {
            [prefixClassname("radio--horizontal")]: direction === "horizontal",
            [prefixClassname("radio--vertical")]: direction === "vertical",
        }, className), onClick: handleClick, ...restProps },
        React.createElement(View, { className: classNames(prefixClassname("radio__icon"), prefixClassname(`radio__icon--${shape}`), {
                [prefixClassname("radio__icon--disabled")]: disabled,
                [prefixClassname("radio__icon--checked")]: checked,
            }), style: { fontSize: size ? addUnitPx(size) : "" }, children: icon }),
        children && (React.createElement(View, { className: classNames(prefixClassname("radio__label"), {
                [prefixClassname("radio__label--disabled")]: disabled,
            }), children: children }))));
}
