import{_ as I}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css                  *//* empty css               *//* empty css                        *//* empty css                */import{u as j,H as z,i as q,a as W,b as X,c as Y,d as J,e as K,f as Q}from"./charts-axzJldHz.js";import{ak as h,al as Z,M as $,am as ss,an as ts,ao as es,ap as as,V as os,S as ls,p as B,W as d,o as H,aa as ns}from"./element-plus-CWGZaCRY.js";import{a as is}from"./index-C1UAl2ua.js";import{l as rs,r as g,c as b,d as cs,m as u,t as s,G as C,Y as k,H as o,B as e,q as c,u as M,D as ds,F as S,a8 as us,A as E,E as R}from"./vue-vendor-CvPKWCuE.js";const ms={class:"dashboard"},_s={class:"stats-grid"},vs={class:"stat-content"},ps={class:"stat-info"},ys={class:"stat-value"},fs={class:"stat-label"},hs={class:"charts-section"},gs={class:"card-header"},bs={class:"chart-container"},Cs={class:"chart-container"},ks={class:"system-status-section"},Ss={class:"status-list"},Es={class:"status-info"},xs={class:"status-label"},ws={class:"card-header"},As={class:"activity-list"},Ds={class:"activity-avatar"},zs={class:"activity-content"},$s={class:"activity-text"},Bs={class:"activity-time"},Hs={key:0,class:"no-activities"},Ms=rs({__name:"Dashboard",setup(Rs){j([q,W,X,Y,J,K,Q]);const l=is(),x=g(!1),y=g(!1),_=g("7d"),U=[{label:"7天",value:"7d"},{label:"30天",value:"30d"},{label:"90天",value:"90d"}],P=b(()=>{var i,a,n,r;return[{key:"totalUsers",label:"总用户数",value:((i=l.systemStats)==null?void 0:i.total_users)||0,icon:"User",color:"#4A90E2"},{key:"activeUsers",label:"活跃用户",value:((a=l.systemStats)==null?void 0:a.active_users)||0,icon:"UserFilled",color:"#67C23A"},{key:"dataEntries",label:"数据条目",value:((n=l.systemStats)==null?void 0:n.total_data_entries)||0,icon:"DataAnalysis",color:"#E6A23C"},{key:"systemUptime",label:"系统运行时间",value:((r=l.systemStats)==null?void 0:r.system_uptime)||"-",icon:"Timer",color:"#F56C6C"}]}),V=b(()=>{var i,a,n,r,v,f,m,p;return[{key:"database",label:"数据库",value:((i=l.systemConfig)==null?void 0:i.database_status)==="connected"?"正常":"异常",status:((a=l.systemConfig)==null?void 0:a.database_status)==="connected"?"online":"offline",icon:"Database"},{key:"redis",label:"Redis",value:((n=l.systemConfig)==null?void 0:n.redis_status)==="connected"?"正常":"异常",status:((r=l.systemConfig)==null?void 0:r.redis_status)==="connected"?"online":"offline",icon:"Connection"},{key:"memory",label:"内存使用率",value:`${((v=l.systemStats)==null?void 0:v.memory_usage)||0}%`,status:(((f=l.systemStats)==null?void 0:f.memory_usage)||0)<80?"online":"warning",icon:"Monitor"},{key:"cpu",label:"CPU使用率",value:`${((m=l.systemStats)==null?void 0:m.cpu_usage)||0}%`,status:(((p=l.systemStats)==null?void 0:p.cpu_usage)||0)<80?"online":"warning",icon:"Cpu"}]}),w=g([{id:1,user:"admin",action:"登录了系统",time:h().subtract(5,"minute").format("HH:mm"),color:"#4A90E2"},{id:2,user:"test",action:"创建了新的数据记录",time:h().subtract(15,"minute").format("HH:mm"),color:"#67C23A"},{id:3,user:"admin",action:"更新了系统配置",time:h().subtract(30,"minute").format("HH:mm"),color:"#E6A23C"}]),F=b(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["活跃用户","新用户"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:T()},yAxis:{type:"value"},series:[{name:"活跃用户",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:A()},{name:"新用户",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:A()}]})),N=b(()=>({tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:[{value:35,name:"移动端"},{value:25,name:"PC端"},{value:20,name:"小程序"},{value:20,name:"其他"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),T=()=>{const i=_.value==="7d"?7:_.value==="30d"?30:90,a=[];for(let n=i-1;n>=0;n--)a.push(h().subtract(n,"day").format("MM-DD"));return a},A=()=>{const i=_.value==="7d"?7:_.value==="30d"?30:90;return Array.from({length:i},()=>Math.floor(Math.random()*100))},D=async()=>{x.value=!0,y.value=!0;try{await l.refreshSystemData(),$.success("数据已刷新")}catch{$.error("刷新失败，请重试")}finally{x.value=!1,y.value=!1}};return cs(async()=>{(!l.systemStats||!l.systemConfig)&&await D()}),(i,a)=>{const n=ls,r=ts,v=os,f=es,m=ss,p=Z,G=us("Refresh"),L=ns,O=as;return c(),u("div",ms,[a[5]||(a[5]=s("div",{class:"dashboard-header"},[s("h1",{class:"page-title"},"仪表板"),s("p",{class:"page-subtitle"},"系统概览与数据统计")],-1)),s("div",_s,[(c(!0),u(C,null,k(P.value,t=>(c(),E(r,{key:t.key,class:"stat-card",shadow:"hover"},{default:e(()=>[s("div",vs,[s("div",{class:"stat-icon",style:B({backgroundColor:t.color})},[o(n,{size:24},{default:e(()=>[(c(),E(R(t.icon)))]),_:2},1024)],4),s("div",ps,[s("div",ys,d(t.value),1),s("div",fs,d(t.label),1)])])]),_:2},1024))),128))]),s("div",hs,[o(p,{gutter:20},{default:e(()=>[o(m,{xs:24,lg:16},{default:e(()=>[o(r,{class:"chart-card",shadow:"hover"},{header:e(()=>[s("div",gs,[a[0]||(a[0]=s("span",null,"用户活跃度趋势",-1)),o(f,{size:"small"},{default:e(()=>[(c(),u(C,null,k(U,t=>o(v,{key:t.value,type:_.value===t.value?"primary":"default",size:"small",onClick:Us=>_.value=t.value},{default:e(()=>[S(d(t.label),1)]),_:2},1032,["type","onClick"])),64))]),_:1})])]),default:e(()=>[s("div",bs,[o(M(z),{class:"chart",option:F.value,loading:y.value,autoresize:""},null,8,["option","loading"])])]),_:1})]),_:1}),o(m,{xs:24,lg:8},{default:e(()=>[o(r,{class:"chart-card",shadow:"hover"},{header:e(()=>[...a[1]||(a[1]=[s("span",null,"数据分布",-1)])]),default:e(()=>[s("div",Cs,[o(M(z),{class:"chart",option:N.value,loading:y.value,autoresize:""},null,8,["option","loading"])])]),_:1})]),_:1})]),_:1})]),s("div",ks,[o(p,{gutter:20},{default:e(()=>[o(m,{xs:24,lg:12},{default:e(()=>[o(r,{class:"status-card",shadow:"hover"},{header:e(()=>[...a[2]||(a[2]=[s("span",null,"系统状态",-1)])]),default:e(()=>[s("div",Ss,[(c(!0),u(C,null,k(V.value,t=>(c(),u("div",{key:t.key,class:"status-item"},[s("div",Es,[o(n,{class:H(["status-icon",t.status])},{default:e(()=>[(c(),E(R(t.icon)))]),_:2},1032,["class"]),s("span",xs,d(t.label),1)]),s("div",{class:H(["status-value",t.status])},d(t.value),3)]))),128))])]),_:1})]),_:1}),o(m,{xs:24,lg:12},{default:e(()=>[o(r,{class:"activity-card",shadow:"hover"},{header:e(()=>[s("div",ws,[a[4]||(a[4]=s("span",null,"最近活动",-1)),o(v,{type:"text",size:"small",onClick:D},{default:e(()=>[o(n,null,{default:e(()=>[o(G)]),_:1}),a[3]||(a[3]=S(" 刷新 ",-1))]),_:1})])]),default:e(()=>[s("div",As,[(c(!0),u(C,null,k(w.value,t=>(c(),u("div",{key:t.id,class:"activity-item"},[s("div",Ds,[o(L,{size:32,style:B({backgroundColor:t.color})},{default:e(()=>[S(d(t.user.charAt(0)),1)]),_:2},1032,["style"])]),s("div",zs,[s("div",$s,[s("strong",null,d(t.user),1),S(" "+d(t.action),1)]),s("div",Bs,d(t.time),1)])]))),128)),w.value.length===0?(c(),u("div",Hs,[o(O,{description:"暂无最近活动","image-size":80})])):ds("",!0)])]),_:1})]),_:1})]),_:1})])])}}}),js=I(Ms,[["__scopeId","data-v-5df88648"]]);export{js as default};
