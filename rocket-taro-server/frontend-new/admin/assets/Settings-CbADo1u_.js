import{_ as Te}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css               *//* empty css                 *//* empty css                  *//* empty css                             *//* empty css                  *//* empty css                *//* empty css                     */import{l as Be,r as g,h as P,d as Re,m as G,t as n,H as e,B as t,q as L,a8 as y,C as B,I as R,F as u,D as ee,G as le,u as F}from"./vue-vendor-CvPKWCuE.js";import{a as Fe}from"./index-C1UAl2ua.js";import{al as De,am as Ne,an as Pe,a4 as Ie,a5 as ze,S as Ae,T as Me,$ as qe,a0 as Oe,ar as He,as as We,aD as Ge,V as Le,aE as je,a2 as Ye,aF as $e,aB as Je,aC as Ke,av as Qe,W as A,aG as Xe,M as i,ad as M}from"./element-plus-CWGZaCRY.js";const Ze={class:"settings-page"},he={class:"content-header"},el={class:"content-header"},ll={class:"content-header"},tl={class:"content-header"},al={class:"database-status"},ol={class:"database-actions"},nl={class:"content-header"},sl={class:"content-header"},ul=Be({__name:"Settings",setup(il){const x=Fe(),w=g("basic"),d=g(!1),S=g(!1),q=g(!1),O=g(!1),H=g(!1),W=g(),te=g(),ae=g(),oe=g(),ne=g(),c=P({app_name:"Rocket Admin",app_description:"现代化管理后台系统",default_language:"zh-CN",timezone:"Asia/Shanghai",maintenance_mode:!1}),m=P({password_requirements:["lowercase","numbers"],min_password_length:8,session_timeout:60,max_login_attempts:5,two_factor_auth:!1,ip_whitelist:""}),p=P({email_enabled:!1,smtp_host:"",smtp_port:587,smtp_username:"",smtp_password:"",system_notifications:["system_error"]}),b=P({auto_backup:!0,backup_frequency:"daily",backup_time:"02:00",retention_count:7}),v=P({log_level:"info",retention_days:30,access_log_enabled:!0,error_log_enabled:!0}),se={app_name:[{required:!0,message:"请输入应用名称",trigger:"blur"}]},ue=s=>{w.value=s},ie=async()=>{if(W.value)try{if(!await W.value.validate())return;d.value=!0,await new Promise(l=>setTimeout(l,1e3)),i.success("基本设置已保存")}catch{i.error("保存失败，请重试")}finally{d.value=!1}},de=()=>{Object.assign(c,{app_name:"Rocket Admin",app_description:"现代化管理后台系统",default_language:"zh-CN",timezone:"Asia/Shanghai",maintenance_mode:!1})},re=async()=>{d.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),i.success("安全设置已保存")}catch{i.error("保存失败，请重试")}finally{d.value=!1}},me=()=>{Object.assign(m,{password_requirements:["lowercase","numbers"],min_password_length:8,session_timeout:60,max_login_attempts:5,two_factor_auth:!1,ip_whitelist:""})},pe=async()=>{d.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),i.success("通知设置已保存")}catch{i.error("保存失败，请重试")}finally{d.value=!1}},fe=async()=>{S.value=!0;try{await new Promise(s=>setTimeout(s,2e3)),i.success("测试邮件已发送")}catch{i.error("邮件发送失败")}finally{S.value=!1}},_e=async()=>{S.value=!0;try{await x.refreshSystemData(),i.success("数据库连接正常")}catch{i.error("数据库连接测试失败")}finally{S.value=!1}},ce=async()=>{try{await M.confirm("确定要优化数据库吗？此操作可能需要一些时间。","确认优化",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}),q.value=!0,await new Promise(s=>setTimeout(s,3e3)),i.success("数据库优化完成")}catch{}finally{q.value=!1}},ge=()=>{M.alert("维护模式功能开发中，敬请期待！","功能提示",{confirmButtonText:"确定",type:"info"})},be=async()=>{d.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),i.success("备份设置已保存")}catch{i.error("保存失败，请重试")}finally{d.value=!1}},ve=async()=>{try{await M.confirm("确定要立即创建系统备份吗？","确认备份",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}),O.value=!0,await new Promise(s=>setTimeout(s,5e3)),i.success("备份创建成功")}catch{}finally{O.value=!1}},ye=async()=>{d.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),i.success("日志设置已保存")}catch{i.error("保存失败，请重试")}finally{d.value=!1}},we=async()=>{try{await M.confirm("确定要清空所有日志文件吗？此操作不可撤销。","确认清空",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),H.value=!0,await new Promise(s=>setTimeout(s,2e3)),i.success("日志已清空")}catch{}finally{H.value=!1}};return Re(()=>{}),(s,l)=>{const j=y("Setting"),r=Ae,C=ze,Y=y("Lock"),$=y("Bell"),J=y("Database"),K=y("FolderOpened"),Q=y("Document"),Ve=Ie,k=Pe,X=Ne,U=Oe,o=qe,f=We,I=He,E=Ge,_=Le,D=Me,V=Ye,Z=je,T=$e,h=Qe,z=Ke,xe=Je,ke=y("Connection"),Se=y("Tools"),Ce=y("Warning"),Ue=Xe,Ee=De;return L(),G("div",Ze,[l[64]||(l[64]=n("div",{class:"page-header"},[n("div",{class:"header-content"},[n("h1",{class:"page-title"},"系统设置"),n("p",{class:"page-subtitle"},"配置系统参数和功能选项")])],-1)),e(Ee,{gutter:20},{default:t(()=>[e(X,{xs:24,lg:6},{default:t(()=>[e(k,{class:"settings-menu",shadow:"never"},{default:t(()=>[e(Ve,{"default-active":w.value,class:"settings-menu-list",onSelect:ue},{default:t(()=>[e(C,{index:"basic"},{default:t(()=>[e(r,null,{default:t(()=>[e(j)]),_:1}),l[25]||(l[25]=n("span",null,"基本设置",-1))]),_:1}),e(C,{index:"security"},{default:t(()=>[e(r,null,{default:t(()=>[e(Y)]),_:1}),l[26]||(l[26]=n("span",null,"安全设置",-1))]),_:1}),e(C,{index:"notification"},{default:t(()=>[e(r,null,{default:t(()=>[e($)]),_:1}),l[27]||(l[27]=n("span",null,"通知设置",-1))]),_:1}),e(C,{index:"database"},{default:t(()=>[e(r,null,{default:t(()=>[e(J)]),_:1}),l[28]||(l[28]=n("span",null,"数据库设置",-1))]),_:1}),e(C,{index:"backup"},{default:t(()=>[e(r,null,{default:t(()=>[e(K)]),_:1}),l[29]||(l[29]=n("span",null,"备份设置",-1))]),_:1}),e(C,{index:"logs"},{default:t(()=>[e(r,null,{default:t(()=>[e(Q)]),_:1}),l[30]||(l[30]=n("span",null,"日志设置",-1))]),_:1})]),_:1},8,["default-active"])]),_:1})]),_:1}),e(X,{xs:24,lg:18},{default:t(()=>[B(e(k,{class:"setting-content",shadow:"never"},{header:t(()=>[n("div",he,[e(r,null,{default:t(()=>[e(j)]),_:1}),l[31]||(l[31]=n("span",null,"基本设置",-1))])]),default:t(()=>[e(D,{ref_key:"basicFormRef",ref:W,model:c,rules:se,"label-width":"120px",class:"setting-form"},{default:t(()=>[e(o,{label:"应用名称",prop:"app_name"},{default:t(()=>[e(U,{modelValue:c.app_name,"onUpdate:modelValue":l[0]||(l[0]=a=>c.app_name=a),placeholder:"请输入应用名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(o,{label:"应用描述",prop:"app_description"},{default:t(()=>[e(U,{modelValue:c.app_description,"onUpdate:modelValue":l[1]||(l[1]=a=>c.app_description=a),type:"textarea",rows:3,placeholder:"请输入应用描述",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(o,{label:"默认语言"},{default:t(()=>[e(I,{modelValue:c.default_language,"onUpdate:modelValue":l[2]||(l[2]=a=>c.default_language=a),placeholder:"选择默认语言"},{default:t(()=>[e(f,{label:"简体中文",value:"zh-CN"}),e(f,{label:"English",value:"en-US"}),e(f,{label:"繁体中文",value:"zh-TW"})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"时区设置"},{default:t(()=>[e(I,{modelValue:c.timezone,"onUpdate:modelValue":l[3]||(l[3]=a=>c.timezone=a),placeholder:"选择时区"},{default:t(()=>[e(f,{label:"Asia/Shanghai (+08:00)",value:"Asia/Shanghai"}),e(f,{label:"UTC (+00:00)",value:"UTC"}),e(f,{label:"America/New_York (-05:00)",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"维护模式"},{default:t(()=>[e(E,{modelValue:c.maintenance_mode,"onUpdate:modelValue":l[4]||(l[4]=a=>c.maintenance_mode=a),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),l[32]||(l[32]=n("div",{class:"form-tip"},"开启后，普通用户将无法访问系统",-1))]),_:1}),e(o,null,{default:t(()=>[e(_,{type:"primary",onClick:ie,loading:d.value},{default:t(()=>[...l[33]||(l[33]=[u(" 保存基本设置 ",-1)])]),_:1},8,["loading"]),e(_,{onClick:de},{default:t(()=>[...l[34]||(l[34]=[u("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},512),[[R,w.value==="basic"]]),B(e(k,{class:"setting-content",shadow:"never"},{header:t(()=>[n("div",el,[e(r,null,{default:t(()=>[e(Y)]),_:1}),l[35]||(l[35]=n("span",null,"安全设置",-1))])]),default:t(()=>[e(D,{ref_key:"securityFormRef",ref:te,model:m,"label-width":"140px",class:"setting-form"},{default:t(()=>[e(o,{label:"密码复杂度要求"},{default:t(()=>[e(Z,{modelValue:m.password_requirements,"onUpdate:modelValue":l[5]||(l[5]=a=>m.password_requirements=a)},{default:t(()=>[e(V,{label:"uppercase"},{default:t(()=>[...l[36]||(l[36]=[u("至少包含一个大写字母",-1)])]),_:1}),e(V,{label:"lowercase"},{default:t(()=>[...l[37]||(l[37]=[u("至少包含一个小写字母",-1)])]),_:1}),e(V,{label:"numbers"},{default:t(()=>[...l[38]||(l[38]=[u("至少包含一个数字",-1)])]),_:1}),e(V,{label:"symbols"},{default:t(()=>[...l[39]||(l[39]=[u("至少包含一个特殊字符",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"最小密码长度"},{default:t(()=>[e(T,{modelValue:m.min_password_length,"onUpdate:modelValue":l[6]||(l[6]=a=>m.min_password_length=a),min:6,max:50,"controls-position":"right"},null,8,["modelValue"])]),_:1}),e(o,{label:"Session超时时间"},{default:t(()=>[e(T,{modelValue:m.session_timeout,"onUpdate:modelValue":l[7]||(l[7]=a=>m.session_timeout=a),min:15,max:1440,"controls-position":"right"},null,8,["modelValue"]),l[40]||(l[40]=n("span",{class:"form-unit"},"分钟",-1))]),_:1}),e(o,{label:"登录失败限制"},{default:t(()=>[e(T,{modelValue:m.max_login_attempts,"onUpdate:modelValue":l[8]||(l[8]=a=>m.max_login_attempts=a),min:3,max:10,"controls-position":"right"},null,8,["modelValue"]),l[41]||(l[41]=n("span",{class:"form-unit"},"次",-1)),l[42]||(l[42]=n("div",{class:"form-tip"},"超过限制次数后将锁定账户",-1))]),_:1}),e(o,{label:"启用双因子认证"},{default:t(()=>[e(E,{modelValue:m.two_factor_auth,"onUpdate:modelValue":l[9]||(l[9]=a=>m.two_factor_auth=a),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),e(o,{label:"IP白名单"},{default:t(()=>[e(U,{modelValue:m.ip_whitelist,"onUpdate:modelValue":l[10]||(l[10]=a=>m.ip_whitelist=a),type:"textarea",rows:3,placeholder:`每行一个IP地址，支持CIDR格式
例如：192.168.1.1
例如：10.0.0.0/24`},null,8,["modelValue"])]),_:1}),e(o,null,{default:t(()=>[e(_,{type:"primary",onClick:re,loading:d.value},{default:t(()=>[...l[43]||(l[43]=[u(" 保存安全设置 ",-1)])]),_:1},8,["loading"]),e(_,{onClick:me},{default:t(()=>[...l[44]||(l[44]=[u("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},512),[[R,w.value==="security"]]),B(e(k,{class:"setting-content",shadow:"never"},{header:t(()=>[n("div",ll,[e(r,null,{default:t(()=>[e($)]),_:1}),l[45]||(l[45]=n("span",null,"通知设置",-1))])]),default:t(()=>[e(D,{ref_key:"notificationFormRef",ref:ae,model:p,"label-width":"120px",class:"setting-form"},{default:t(()=>[e(o,{label:"邮件通知"},{default:t(()=>[e(E,{modelValue:p.email_enabled,"onUpdate:modelValue":l[11]||(l[11]=a=>p.email_enabled=a),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),p.email_enabled?(L(),G(le,{key:0},[e(o,{label:"SMTP服务器"},{default:t(()=>[e(U,{modelValue:p.smtp_host,"onUpdate:modelValue":l[12]||(l[12]=a=>p.smtp_host=a),placeholder:"例如：smtp.gmail.com"},null,8,["modelValue"])]),_:1}),e(o,{label:"SMTP端口"},{default:t(()=>[e(T,{modelValue:p.smtp_port,"onUpdate:modelValue":l[13]||(l[13]=a=>p.smtp_port=a),min:1,max:65535,"controls-position":"right"},null,8,["modelValue"])]),_:1}),e(o,{label:"发件人邮箱"},{default:t(()=>[e(U,{modelValue:p.smtp_username,"onUpdate:modelValue":l[14]||(l[14]=a=>p.smtp_username=a),placeholder:"发件人邮箱地址"},null,8,["modelValue"])]),_:1}),e(o,{label:"邮箱密码"},{default:t(()=>[e(U,{modelValue:p.smtp_password,"onUpdate:modelValue":l[15]||(l[15]=a=>p.smtp_password=a),type:"password",placeholder:"邮箱密码或授权码","show-password":""},null,8,["modelValue"])]),_:1})],64)):ee("",!0),e(o,{label:"系统通知"},{default:t(()=>[e(Z,{modelValue:p.system_notifications,"onUpdate:modelValue":l[16]||(l[16]=a=>p.system_notifications=a)},{default:t(()=>[e(V,{label:"user_login"},{default:t(()=>[...l[46]||(l[46]=[u("用户登录",-1)])]),_:1}),e(V,{label:"user_register"},{default:t(()=>[...l[47]||(l[47]=[u("用户注册",-1)])]),_:1}),e(V,{label:"system_error"},{default:t(()=>[...l[48]||(l[48]=[u("系统错误",-1)])]),_:1}),e(V,{label:"data_backup"},{default:t(()=>[...l[49]||(l[49]=[u("数据备份",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(o,null,{default:t(()=>[e(_,{type:"primary",onClick:pe,loading:d.value},{default:t(()=>[...l[50]||(l[50]=[u(" 保存通知设置 ",-1)])]),_:1},8,["loading"]),e(_,{onClick:fe,loading:S.value},{default:t(()=>[...l[51]||(l[51]=[u(" 测试邮件发送 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},512),[[R,w.value==="notification"]]),B(e(k,{class:"setting-content",shadow:"never"},{header:t(()=>[n("div",tl,[e(r,null,{default:t(()=>[e(J)]),_:1}),l[52]||(l[52]=n("span",null,"数据库设置",-1))])]),default:t(()=>[n("div",al,[e(xe,{title:"数据库连接状态",column:2,border:""},{default:t(()=>[e(z,{label:"连接状态"},{default:t(()=>{var a;return[e(h,{type:((a=F(x).systemConfig)==null?void 0:a.database_status)==="connected"?"success":"danger"},{default:t(()=>{var N;return[u(A(((N=F(x).systemConfig)==null?void 0:N.database_status)==="connected"?"已连接":"断开连接"),1)]}),_:1},8,["type"])]}),_:1}),e(z,{label:"Redis状态"},{default:t(()=>{var a;return[e(h,{type:((a=F(x).systemConfig)==null?void 0:a.redis_status)==="connected"?"success":"danger"},{default:t(()=>{var N;return[u(A(((N=F(x).systemConfig)==null?void 0:N.redis_status)==="connected"?"已连接":"断开连接"),1)]}),_:1},8,["type"])]}),_:1}),e(z,{label:"内存使用"},{default:t(()=>{var a;return[u(A(((a=F(x).systemStats)==null?void 0:a.memory_usage)||0)+"% ",1)]}),_:1}),e(z,{label:"CPU使用"},{default:t(()=>{var a;return[u(A(((a=F(x).systemStats)==null?void 0:a.cpu_usage)||0)+"% ",1)]}),_:1})]),_:1})]),n("div",ol,[e(_,{type:"primary",onClick:_e,loading:S.value},{default:t(()=>[e(r,null,{default:t(()=>[e(ke)]),_:1}),l[53]||(l[53]=u(" 测试连接 ",-1))]),_:1},8,["loading"]),e(_,{onClick:ce,loading:q.value},{default:t(()=>[e(r,null,{default:t(()=>[e(Se)]),_:1}),l[54]||(l[54]=u(" 优化数据库 ",-1))]),_:1},8,["loading"]),e(_,{type:"warning",onClick:ge},{default:t(()=>[e(r,null,{default:t(()=>[e(Ce)]),_:1}),l[55]||(l[55]=u(" 维护模式 ",-1))]),_:1})])]),_:1},512),[[R,w.value==="database"]]),B(e(k,{class:"setting-content",shadow:"never"},{header:t(()=>[n("div",nl,[e(r,null,{default:t(()=>[e(K)]),_:1}),l[56]||(l[56]=n("span",null,"备份设置",-1))])]),default:t(()=>[e(D,{ref_key:"backupFormRef",ref:oe,model:b,"label-width":"120px",class:"setting-form"},{default:t(()=>[e(o,{label:"自动备份"},{default:t(()=>[e(E,{modelValue:b.auto_backup,"onUpdate:modelValue":l[17]||(l[17]=a=>b.auto_backup=a),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),b.auto_backup?(L(),G(le,{key:0},[e(o,{label:"备份频率"},{default:t(()=>[e(I,{modelValue:b.backup_frequency,"onUpdate:modelValue":l[18]||(l[18]=a=>b.backup_frequency=a),placeholder:"选择备份频率"},{default:t(()=>[e(f,{label:"每日",value:"daily"}),e(f,{label:"每周",value:"weekly"}),e(f,{label:"每月",value:"monthly"})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"备份时间"},{default:t(()=>[e(Ue,{modelValue:b.backup_time,"onUpdate:modelValue":l[19]||(l[19]=a=>b.backup_time=a),format:"HH:mm","value-format":"HH:mm",placeholder:"选择备份时间"},null,8,["modelValue"])]),_:1})],64)):ee("",!0),e(o,{label:"保留备份数量"},{default:t(()=>[e(T,{modelValue:b.retention_count,"onUpdate:modelValue":l[20]||(l[20]=a=>b.retention_count=a),min:1,max:30,"controls-position":"right"},null,8,["modelValue"]),l[57]||(l[57]=n("span",{class:"form-unit"},"个",-1))]),_:1}),e(o,null,{default:t(()=>[e(_,{type:"primary",onClick:be,loading:d.value},{default:t(()=>[...l[58]||(l[58]=[u(" 保存备份设置 ",-1)])]),_:1},8,["loading"]),e(_,{type:"success",onClick:ve,loading:O.value},{default:t(()=>[...l[59]||(l[59]=[u(" 立即备份 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},512),[[R,w.value==="backup"]]),B(e(k,{class:"setting-content",shadow:"never"},{header:t(()=>[n("div",sl,[e(r,null,{default:t(()=>[e(Q)]),_:1}),l[60]||(l[60]=n("span",null,"日志设置",-1))])]),default:t(()=>[e(D,{ref_key:"logsFormRef",ref:ne,model:v,"label-width":"120px",class:"setting-form"},{default:t(()=>[e(o,{label:"日志级别"},{default:t(()=>[e(I,{modelValue:v.log_level,"onUpdate:modelValue":l[21]||(l[21]=a=>v.log_level=a),placeholder:"选择日志级别"},{default:t(()=>[e(f,{label:"DEBUG",value:"debug"}),e(f,{label:"INFO",value:"info"}),e(f,{label:"WARN",value:"warn"}),e(f,{label:"ERROR",value:"error"})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"日志保留天数"},{default:t(()=>[e(T,{modelValue:v.retention_days,"onUpdate:modelValue":l[22]||(l[22]=a=>v.retention_days=a),min:1,max:365,"controls-position":"right"},null,8,["modelValue"]),l[61]||(l[61]=n("span",{class:"form-unit"},"天",-1))]),_:1}),e(o,{label:"启用访问日志"},{default:t(()=>[e(E,{modelValue:v.access_log_enabled,"onUpdate:modelValue":l[23]||(l[23]=a=>v.access_log_enabled=a),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),e(o,{label:"启用错误日志"},{default:t(()=>[e(E,{modelValue:v.error_log_enabled,"onUpdate:modelValue":l[24]||(l[24]=a=>v.error_log_enabled=a),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),e(o,null,{default:t(()=>[e(_,{type:"primary",onClick:ye,loading:d.value},{default:t(()=>[...l[62]||(l[62]=[u(" 保存日志设置 ",-1)])]),_:1},8,["loading"]),e(_,{onClick:we,loading:H.value},{default:t(()=>[...l[63]||(l[63]=[u(" 清空日志 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},512),[[R,w.value==="logs"]])]),_:1})]),_:1})])}}}),wl=Te(ul,[["__scopeId","data-v-d7866a34"]]);export{wl as default};
