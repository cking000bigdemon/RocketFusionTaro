import{o as N,v as U,r as c,y as F,z as P,b as t,A as w,B as s,a8 as C,D as S,af as $,ae as a,E as k,C as H}from"./index-078b64ab.js";import{f as I,i as L,N as R,T as z}from"./index-9381f699.js";import{_ as G}from"./_plugin-vue_export-helper-a85ffdf4.js";import{C as j,F as q}from"./index-7708d5b5.js";import{C as J}from"./index-fb2d1b7b.js";const K={class:"profile-page"},M={class:"profile-content"},O={class:"actions"},Q={__name:"Profile",setup(W){const o=N(),i=U(),d=c(!1),_=c(""),m=c(""),r=c("");function y(){i.platformAdapter.goBack()}function f(l,e,p){m.value=l,_.value=e,r.value=p||"",d.value=!0}function h(l){switch(l){case"email":return[{validator:e=>!e||L(e),message:"邮箱格式不正确"}];default:return[]}}async function V(){try{const l={[m.value]:r.value};await C.mobileUpdateUserInfo(l),await i.platformAdapter.showToast("更新成功","success")}catch{await i.platformAdapter.showToast("更新失败","error")}}async function A(){(await i.platformAdapter.showConfirm("确认退出","确定要退出登录吗？")).confirm&&await C.mobileLogout()}return(l,e)=>{const p=R,u=j,B=z,b=J,x=S,D=q,T=$;return F(),P("div",K,[t(p,{title:"个人资料","left-text":"返回","left-arrow":"",onClickLeft:y}),w("div",M,[t(b,{inset:""},{default:s(()=>{var n,v;return[t(u,{title:"用户名",value:a(o).username,"is-link":"",onClick:e[0]||(e[0]=E=>f("username","用户名",a(o).username))},null,8,["value"]),t(u,{title:"邮箱",value:((n=a(o).user)==null?void 0:n.email)||"未设置","is-link":"",onClick:e[1]||(e[1]=E=>{var g;return f("email","邮箱",(g=a(o).user)==null?void 0:g.email)})},null,8,["value"]),t(u,{title:"用户类型",value:a(o).isAdmin?"管理员":"普通用户"},{"right-icon":s(()=>[t(B,{type:a(o).isAdmin?"danger":"primary"},{default:s(()=>[k(H(a(o).isAdmin?"管理员":"普通用户"),1)]),_:1},8,["type"])]),_:1},8,["value"]),t(u,{title:"注册时间",value:a(I)((v=a(o).user)==null?void 0:v.created_at)},null,8,["value"])]}),_:1}),w("div",O,[t(x,{type:"danger",block:"",round:"",onClick:A},{default:s(()=>[...e[4]||(e[4]=[k(" 退出登录 ",-1)])]),_:1})])]),t(T,{show:d.value,"onUpdate:show":e[3]||(e[3]=n=>d.value=n),title:_.value,"show-cancel-button":"",onConfirm:V},{default:s(()=>[t(D,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=n=>r.value=n),placeholder:`请输入${_.value}`,rules:h(m.value)},null,8,["modelValue","placeholder","rules"])]),_:1},8,["show","title"])])}}},ae=G(Q,[["__scopeId","data-v-9cea61a9"]]);export{ae as default};
